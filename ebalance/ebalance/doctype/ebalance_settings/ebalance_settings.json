{
 "actions": [],
 "allow_rename": 0,
 "creation": "2024-12-16 12:00:00.000000",
 "doctype": "DocType",
 "engine": "InnoDB",
 "field_order": [
  "connection_tab",
  "environment_section",
  "environment",
  "column_break_env",
  "enabled",
  "auth_section",
  "auth_url",
  "username",
  "password",
  "column_break_auth",
  "org_regno",
  "user_regno",
  "per_map_user_role_id",
  "api_section",
  "api_url",
  "column_break_api",
  "test_connection_button",
  "connection_status",
  "company_section",
  "company",
  "column_break_company",
  "default_fiscal_year",
  "automation_tab",
  "sync_section",
  "auto_sync_periods",
  "sync_frequency",
  "column_break_sync",
  "last_sync",
  "next_sync",
  "auto_submit_section",
  "auto_fetch_forms",
  "auto_map_accounts",
  "column_break_auto",
  "notify_on_submission",
  "notify_email",
  "webhook_section",
  "enable_webhooks",
  "webhook_secret",
  "advanced_tab",
  "debug_section",
  "debug_mode",
  "log_api_requests",
  "column_break_debug",
  "log_retention_days",
  "performance_section",
  "request_timeout",
  "retry_attempts",
  "column_break_perf",
  "connection_pool_size",
  "token_section",
  "access_token",
  "token_expiry",
  "column_break_token",
  "refresh_token"
 ],
 "fields": [
  {
   "fieldname": "connection_tab",
   "fieldtype": "Tab Break",
   "label": "Connection"
  },
  {
   "collapsible": 1,
   "fieldname": "environment_section",
   "fieldtype": "Section Break",
   "label": "Environment"
  },
  {
   "default": "Staging",
   "description": "Staging = Test environment (st-inspector-ebalance.mof.gov.mn), Production = Live environment (inspector-ebalance.mof.gov.mn)",
   "fieldname": "environment",
   "fieldtype": "Select",
   "in_list_view": 1,
   "label": "Environment",
   "options": "Staging\nProduction",
   "reqd": 1
  },
  {
   "fieldname": "column_break_env",
   "fieldtype": "Column Break"
  },
  {
   "default": "1",
   "description": "Enable eBalance integration. If disabled, no API calls will be made.",
   "fieldname": "enabled",
   "fieldtype": "Check",
   "label": "Enabled"
  },
  {
   "collapsible": 1,
   "fieldname": "auth_section",
   "fieldtype": "Section Break",
   "label": "Authentication (ITC OAuth2)"
  },
  {
   "default": "https://auth.itc.gov.mn/auth/realms/ITC",
   "description": "ITC OAuth2 Server URL",
   "fieldname": "auth_url",
   "fieldtype": "Data",
   "label": "Auth URL",
   "read_only": 1
  },
  {
   "description": "ITC SSO username (e.g., AA10010110). Login name provided by Ministry of Finance for eBalance system.",
   "fieldname": "username",
   "fieldtype": "Data",
   "in_list_view": 1,
   "label": "Username",
   "reqd": 1
  },
  {
   "description": "ITC SSO password. Stored encrypted in Frappe system.",
   "fieldname": "password",
   "fieldtype": "Password",
   "label": "Password",
   "reqd": 1
  },
  {
   "fieldname": "column_break_auth",
   "fieldtype": "Column Break"
  },
  {
   "description": "Organization registration number (7-digit number, e.g., 1234567). TIN registration number.",
   "fieldname": "org_regno",
   "fieldtype": "Data",
   "in_list_view": 1,
   "label": "Organization RegNo",
   "reqd": 1
  },
  {
   "description": "User registration number. Auto-filled from Username if empty.",
   "fieldname": "user_regno",
   "fieldtype": "Data",
   "label": "User RegNo"
  },
  {
   "description": "User role ID automatically retrieved from eBalance API. Updated when Test Connection is clicked.",
   "fieldname": "per_map_user_role_id",
   "fieldtype": "Data",
   "label": "User Role ID",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "api_section",
   "fieldtype": "Section Break",
   "label": "API Connection"
  },
  {
   "description": "Auto-set based on environment",
   "fieldname": "api_url",
   "fieldtype": "Data",
   "label": "API URL",
   "read_only": 1
  },
  {
   "fieldname": "column_break_api",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "test_connection_button",
   "fieldtype": "Button",
   "label": "Test Connection"
  },
  {
   "fieldname": "connection_status",
   "fieldtype": "Data",
   "label": "Connection Status",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "company_section",
   "fieldtype": "Section Break",
   "label": "Company Settings"
  },
  {
   "description": "ERPNext company. Financial reports will be generated from this company's GL Entries.",
   "fieldname": "company",
   "fieldtype": "Link",
   "label": "Company",
   "options": "Company"
  },
  {
   "fieldname": "column_break_company",
   "fieldtype": "Column Break"
  },
  {
   "description": "Default fiscal year for reports. Automatically selected when generating reports.",
   "fieldname": "default_fiscal_year",
   "fieldtype": "Link",
   "label": "Default Fiscal Year",
   "options": "Fiscal Year"
  },
  {
   "fieldname": "automation_tab",
   "fieldtype": "Tab Break",
   "label": "Automation"
  },
  {
   "collapsible": 1,
   "fieldname": "sync_section",
   "fieldtype": "Section Break",
   "label": "Period Sync"
  },
  {
   "default": "1",
   "description": "Automatically sync report periods from eBalance. Report periods include year-end, half-year, etc.",
   "fieldname": "auto_sync_periods",
   "fieldtype": "Check",
   "label": "Auto Sync Report Periods"
  },
  {
   "default": "Daily",
   "depends_on": "auto_sync_periods",
   "description": "How often to check for new report periods (hourly, daily, or weekly).",
   "fieldname": "sync_frequency",
   "fieldtype": "Select",
   "label": "Sync Frequency",
   "options": "Hourly\nDaily\nWeekly"
  },
  {
   "fieldname": "column_break_sync",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "last_sync",
   "fieldtype": "Datetime",
   "label": "Last Sync",
   "read_only": 1
  },
  {
   "fieldname": "next_sync",
   "fieldtype": "Datetime",
   "label": "Next Sync",
   "read_only": 1
  },
  {
   "collapsible": 1,
   "fieldname": "auto_submit_section",
   "fieldtype": "Section Break",
   "label": "Auto Processing"
  },
  {
   "default": "1",
   "description": "Automatically fetch report form structures (Balance Sheet, Income Statement, Cash Flow) from eBalance.",
   "fieldname": "auto_fetch_forms",
   "fieldtype": "Check",
   "label": "Auto Fetch Report Forms"
  },
  {
   "default": "1",
   "description": "Automatically map ERPNext accounts to MOF account codes based on account number and name matching.",
   "fieldname": "auto_map_accounts",
   "fieldtype": "Check",
   "label": "Auto Map Accounts"
  },
  {
   "fieldname": "column_break_auto",
   "fieldtype": "Column Break"
  },
  {
   "default": "1",
   "description": "Send email notification after report submission.",
   "fieldname": "notify_on_submission",
   "fieldtype": "Check",
   "label": "Notify on Submission"
  },
  {
   "depends_on": "notify_on_submission",
   "description": "Email address to receive notifications.",
   "fieldname": "notify_email",
   "fieldtype": "Data",
   "label": "Notification Email",
   "options": "Email"
  },
  {
   "collapsible": 1,
   "fieldname": "webhook_section",
   "fieldtype": "Section Break",
   "label": "Webhooks"
  },
  {
   "default": "0",
   "fieldname": "enable_webhooks",
   "fieldtype": "Check",
   "label": "Enable Webhooks"
  },
  {
   "depends_on": "enable_webhooks",
   "fieldname": "webhook_secret",
   "fieldtype": "Password",
   "label": "Webhook Secret"
  },
  {
   "fieldname": "advanced_tab",
   "fieldtype": "Tab Break",
   "label": "Advanced"
  },
  {
   "collapsible": 1,
   "fieldname": "debug_section",
   "fieldtype": "Section Break",
   "label": "Debug & Logging"
  },
  {
   "default": "0",
   "description": "Enable debug mode. Logs detailed API requests and responses.",
   "fieldname": "debug_mode",
   "fieldtype": "Check",
   "label": "Debug Mode"
  },
  {
   "default": "0",
   "description": "Log API requests to eBalance Submission Log.",
   "fieldname": "log_api_requests",
   "fieldtype": "Check",
   "label": "Log API Requests"
  },
  {
   "fieldname": "column_break_debug",
   "fieldtype": "Column Break"
  },
  {
   "default": "30",
   "description": "Number of days to retain logs. Old logs are automatically deleted.",
   "fieldname": "log_retention_days",
   "fieldtype": "Int",
   "label": "Log Retention (Days)"
  },
  {
   "collapsible": 1,
   "fieldname": "performance_section",
   "fieldtype": "Section Break",
   "label": "Performance"
  },
  {
   "default": "60",
   "description": "API request timeout in seconds. Slow responses will result in an error.",
   "fieldname": "request_timeout",
   "fieldtype": "Int",
   "label": "Request Timeout (seconds)"
  },
  {
   "default": "3",
   "description": "Number of retry attempts on API error. Applies to 500, 502, 503 errors.",
   "fieldname": "retry_attempts",
   "fieldtype": "Int",
   "label": "Retry Attempts"
  },
  {
   "fieldname": "column_break_perf",
   "fieldtype": "Column Break"
  },
  {
   "default": "10",
   "description": "HTTP connection pool size. Used for concurrent API requests.",
   "fieldname": "connection_pool_size",
   "fieldtype": "Int",
   "label": "Connection Pool Size"
  },
  {
   "collapsible": 1,
   "fieldname": "token_section",
   "fieldtype": "Section Break",
   "label": "Token Cache (Internal)"
  },
  {
   "fieldname": "access_token",
   "fieldtype": "Password",
   "hidden": 1,
   "label": "Access Token"
  },
  {
   "fieldname": "token_expiry",
   "fieldtype": "Datetime",
   "hidden": 1,
   "label": "Token Expiry"
  },
  {
   "fieldname": "column_break_token",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "refresh_token",
   "fieldtype": "Password",
   "hidden": 1,
   "label": "Refresh Token"
  }
 ],
 "hide_toolbar": 0,
 "index_web_pages_for_search": 1,
 "issingle": 1,
 "links": [],
 "modified": "2024-12-16 12:00:00.000000",
 "modified_by": "Administrator",
 "module": "eBalance",
 "name": "eBalance Settings",
 "owner": "Administrator",
 "permissions": [
  {
   "create": 1,
   "delete": 1,
   "email": 1,
   "print": 1,
   "read": 1,
   "role": "System Manager",
   "share": 1,
   "write": 1
  },
  {
   "read": 1,
   "role": "Accounts Manager",
   "write": 1
  }
 ],
 "sort_field": "modified",
 "sort_order": "DESC",
 "track_changes": 1
}
